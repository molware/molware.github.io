---
title: Building a Homelab - Pt. 2
tags: ["homelab","virtualization","proxmox","vmware","virtualbox","pfsense","splunk"]
categories: ["homelab","cyber101"]
description: "Looking to build your own homelab? This blog post explores basic setup, adding a firewall for segmentation and control, and even adding a SIEM for log collection and analysis. With scalability options and the ability to add features like IDS and proxy servers, this is the perfect guide for starting your own homelab."
author: molware
ShowRelated: true
---

Now that we've established hardware requirements, and selected the foundation for our homelab we can begin to explore how we will design our homelab envrionments. 


## Basic Homelab Setup
___

[![](https://mermaid.ink/img/pako:eNp9VcmSo7gW_RWCF71yZpYMGOPcSUxmNpNt3O4FBhIw82QMFfXvTWZWdHRvnjaS7jl3iKvQPT_xoAoj_B3_yKsxSPy2x5BzLa89xVAUufnziq93xNuaZt429Nv6B0Fd8b-w19dXjCQJgqQXfD_VUftIu6rFVH-K2oXw6d8Nt7j16wT7P4GuJbYsZrcBBPHnwlD8PMXUtBye12v5Lzr5Tf8Lw749qE_yKS3DauywNfgvmfhN_qaGaRsFfVqVmKX-Ox32-vaKUZ-FRmW4bOUff2Ba1BZ-GmLC0gqMS_2l_uKznOwLVaKoxvok7bB8MWF9hRV-FmEfQz-0ERaFad99GqdqaJesX85ffknf1937jx_jOL4V3xk-e_3m1_WPf5r-P52S4kusx7t4m6KgQoQLC-TAOY6JRoR5E7MUPLGwhdLIBlBnlSg2Db_kJaTBLWRHneelcww30QNqo2tyEG4sDXmxnUh8BRElDxCVVAzLfGwC-IjXJuK8-sONpTzmb5VkEvWIwBGKY3oQbhMDo2wTiRZ0OfFJ7UVhzKxK2bsbg4coNNwOyqSZeTHM7cmE_miGKJ1S8Iib4IlSuM6B5I7wCIKT3ecTysZzCNHdKy0XcUhlOXqDbPcoQ4QsMFascEuGaU2dz-Ae8ZRj9JaSJx4rI--Z-oXpQF-6dKZpJvIUiTVtFR7B3YmVUc8ChA-NOkfc3b5VwUxJSabGNG9qctqFsaQkrhOz7m00VMdylKN5U2NpHCVL2fsTYVHGZRpuPAwdoxHiAkIkmCGEkfW8QMRsU-ZRMrFLSQ4r2M0CS7XriTW_P170PIjdpklVToFaTaItryq9zWuo1oW2V2VTv5RLJMMx5-OzW7spcWrI0x0QJMxEWWZg9hCp0KF3kyiBgT8c88SQdG4NjoYz6dVo5jyVZhKbOM-kBRSjWeenpZ-tQuFZ21bOLHN_BkCOnjwfe8OzIktZv3drOTBjCBKNZSfIyeWx8tWCec1WhxFxo-2e8_q4Mav8KKwlcBDpgiEVmTsRYB4OPNLajWH79u6jRe0-LrT5g1dlr9W9g2NnmRNEnXQGqbndu9vS10SafxhCalu3jeuqPELik7UOLsVaj72qMM0cImjBysvDguIYFdbHrtzflmbDXCxNVYJcwIonVVqBDj5T1TFBqvB7KUkVIdmWZCBDIHqXeRpCNIL7nhmP1GrdTqGxO7sfEXRVc2se1honmUgU4k4YXZRPPLyc8kGBUOjHBGzltJDaY5eseFixvm6KUGuluzJBZMmwO2vTPN4N76KkouGJJnxcpmS4uVth0MBdZgjej7kAdLEoBDZhH-UoTQuVUZQj2t6DQLqx08WeVSGqu2TKlfJgb_mGCzZTfjAh8p3Y53f88jOqvSkLACkmq8CYMyiSEXkEkSzPgCc-ZkM9nHeAXNLqBng4raZRU9dq6RyUYOXvlaCy8qZjWKaQpvGhu5rSPcVR3Rdsg8xutkK-932Fm3mJMRR7B9PWzoOp02ELOG37jMRZs7RmRSXnWskgUcVPxxXdpi3XjJiYacUm1YHlmqHmJHt8wuX1BzFjYoK-i6u4SNK6AVQS6idiEnptvp3VoinXQ9D6pE7MczsZgxDlBkBzN5CznwwDnY3RWkeRvVZNb_WqdsOqMivZPnHwklOifDkHotIkdOtJmZJEnHXZRYKZixlP00_gPQ5p54l3FFwGl2G9fmWLnLSD3j5TpY8sa1pgrs6XMGLOTQXr5QfGEqsrCYjR5bZV-fzG7XMTxoXxkEzILvPqON6hBpjsTo8HtbtYqYAmd2RoewzlS2jkexscMkri06OcIhvloHTyU7qHJypw4Crb9hJdSqtJ34fLAIVumgQQbY4zGyQSvJb4C_57rC8q-vNTY654n0RFdMXfl-NH1UZdf8Wv5a-F6Q99ZU9lgL_37RC94EMd-n30W2vw9w8_7xbrp5hUrfYtzF_6_ILXfom__8Sf-Pt28wZ2FL0mSXpDkxuGecEn_J0gdm8MsQVbek2BzW4Bf73gc1UtUcHbct-QWwZsKZra7Hb0V7jLF_hZx6-_AQTilig?type=png)](https://mermaid.live/edit#pako:eNp9VcmSo7gW_RWCF71yZpYMGOPcSUxmNpNt3O4FBhIw82QMFfXvTWZWdHRvnjaS7jl3iKvQPT_xoAoj_B3_yKsxSPy2x5BzLa89xVAUufnziq93xNuaZt429Nv6B0Fd8b-w19dXjCQJgqQXfD_VUftIu6rFVH-K2oXw6d8Nt7j16wT7P4GuJbYsZrcBBPHnwlD8PMXUtBye12v5Lzr5Tf8Lw749qE_yKS3DauywNfgvmfhN_qaGaRsFfVqVmKX-Ox32-vaKUZ-FRmW4bOUff2Ba1BZ-GmLC0gqMS_2l_uKznOwLVaKoxvok7bB8MWF9hRV-FmEfQz-0ERaFad99GqdqaJesX85ffknf1937jx_jOL4V3xk-e_3m1_WPf5r-P52S4kusx7t4m6KgQoQLC-TAOY6JRoR5E7MUPLGwhdLIBlBnlSg2Db_kJaTBLWRHneelcww30QNqo2tyEG4sDXmxnUh8BRElDxCVVAzLfGwC-IjXJuK8-sONpTzmb5VkEvWIwBGKY3oQbhMDo2wTiRZ0OfFJ7UVhzKxK2bsbg4coNNwOyqSZeTHM7cmE_miGKJ1S8Iib4IlSuM6B5I7wCIKT3ecTysZzCNHdKy0XcUhlOXqDbPcoQ4QsMFascEuGaU2dz-Ae8ZRj9JaSJx4rI--Z-oXpQF-6dKZpJvIUiTVtFR7B3YmVUc8ChA-NOkfc3b5VwUxJSabGNG9qctqFsaQkrhOz7m00VMdylKN5U2NpHCVL2fsTYVHGZRpuPAwdoxHiAkIkmCGEkfW8QMRsU-ZRMrFLSQ4r2M0CS7XriTW_P170PIjdpklVToFaTaItryq9zWuo1oW2V2VTv5RLJMMx5-OzW7spcWrI0x0QJMxEWWZg9hCp0KF3kyiBgT8c88SQdG4NjoYz6dVo5jyVZhKbOM-kBRSjWeenpZ-tQuFZ21bOLHN_BkCOnjwfe8OzIktZv3drOTBjCBKNZSfIyeWx8tWCec1WhxFxo-2e8_q4Mav8KKwlcBDpgiEVmTsRYB4OPNLajWH79u6jRe0-LrT5g1dlr9W9g2NnmRNEnXQGqbndu9vS10SafxhCalu3jeuqPELik7UOLsVaj72qMM0cImjBysvDguIYFdbHrtzflmbDXCxNVYJcwIonVVqBDj5T1TFBqvB7KUkVIdmWZCBDIHqXeRpCNIL7nhmP1GrdTqGxO7sfEXRVc2se1honmUgU4k4YXZRPPLyc8kGBUOjHBGzltJDaY5eseFixvm6KUGuluzJBZMmwO2vTPN4N76KkouGJJnxcpmS4uVth0MBdZgjej7kAdLEoBDZhH-UoTQuVUZQj2t6DQLqx08WeVSGqu2TKlfJgb_mGCzZTfjAh8p3Y53f88jOqvSkLACkmq8CYMyiSEXkEkSzPgCc-ZkM9nHeAXNLqBng4raZRU9dq6RyUYOXvlaCy8qZjWKaQpvGhu5rSPcVR3Rdsg8xutkK-932Fm3mJMRR7B9PWzoOp02ELOG37jMRZs7RmRSXnWskgUcVPxxXdpi3XjJiYacUm1YHlmqHmJHt8wuX1BzFjYoK-i6u4SNK6AVQS6idiEnptvp3VoinXQ9D6pE7MczsZgxDlBkBzN5CznwwDnY3RWkeRvVZNb_WqdsOqMivZPnHwklOifDkHotIkdOtJmZJEnHXZRYKZixlP00_gPQ5p54l3FFwGl2G9fmWLnLSD3j5TpY8sa1pgrs6XMGLOTQXr5QfGEqsrCYjR5bZV-fzG7XMTxoXxkEzILvPqON6hBpjsTo8HtbtYqYAmd2RoewzlS2jkexscMkri06OcIhvloHTyU7qHJypw4Crb9hJdSqtJ34fLAIVumgQQbY4zGyQSvJb4C_57rC8q-vNTY654n0RFdMXfl-NH1UZdf8Wv5a-F6Q99ZU9lgL_37RC94EMd-n30W2vw9w8_7xbrp5hUrfYtzF_6_ILXfom__8Sf-Pt28wZ2FL0mSXpDkxuGecEn_J0gdm8MsQVbek2BzW4Bf73gc1UtUcHbct-QWwZsKZra7Hb0V7jLF_hZx6-_AQTilig)

As stated in Part 1, the simplest homelab setup consists of a single Windows machine and a Linux virtual machine. There are no tricks or bells and whistles, what we have here is two hosts on the same LAN that will be able to communicate with one another. I always opt to draw the hypervisor layer in my diagrams because the hypervisor is a very important part of your homelab. The hypervisor layer can interact directly with any of the virtual machines without restrictions. This allows your hypervisor to also be part of the homelab giving you additional resources. However, I would not recommend doing this with type-1 hypervisors like ESXi/Proxmox because they are dedicated to administering and managing the virtual environment. This type of homelab setup will allow you to interact with and/or launch attacks from the Kali Linux VM to the Windows virtual machine. Activity can be monitored from hypervisor or from either of the virtual machines.

The dotted-line drawn between the two virtual machines does not mean that they are connected to each other, but is being used to show that they are on the same network and can communicate with each other. This is also depicted by the address for the subnet(192.168.56.1) which also happens to be the IP address of the hypervisor.

## Basic Homelab + Firewall
___

[![](https://mermaid.ink/img/pako:eNplVtuuqzgS_ZUoo5ZmlJN9IOF63mxj7gnXkEDveSBADIEACRBCWv3vwz6n1ZrRwANm1XK5VHaV1x_LpEmz5Y_lpWrGJI8f_QL6n_VnzwgMs2V__1wuPpf_XqzX68V2u9lsuRlRpzZ7PIuueSzMeMoeM-FrhkjNM7h_zgT74mV1l834v74M3XAmj7jNF__j88vy2QsiS202v8-YEVfFwizq4fX5WdPi5oPmhA-W-9h83zAzfeYv_nqYL_qxqNNm7BY09V90-mP7N_vL-6-QfkbP_B_ya-kZng1ZnX4Nfvttscset7hIF_Kcj4VUxHPkt6-wyp9WI8vaRZ8X3aKaoUXfLG5xmS0uQz88skWWFn33BU7N8Fikvyb_nJf3fdv9-P59HMeP268VvhL-Ebft978z_489o5GI7IlI-AImDdwcwA364E3I5q6A6k4QA44IPIA2ogTskZERx4prrIFOBj6gnHyGVZ1i4A0VIASqoRMTo4MOKgBsCNQQSHITQhtKEyWAJ6EdKIXV-UC0gOBzoxHOg07UCSrW1mgPHc6WxmwvtQVDYKcBxHVVCPwh114AGkFJAE0IJ-EqGi7wAA_HECBD3hl3TS6k5o5e4WBIGF7NhhBJAQYXvmQA-pyVprRuPEcy-rJMBASdOm52IVX6noMKzyiQx5UZVG5-0NOGQaS7q_jKygMSzGFa2BfsBcAPJr_UL8fwYFJlT9cFnLPg5Oy6kYgDdNNodA4ZJDue99l5BYtGlLCFeRebkSqcQtN97AGibNgwOTPmFD7h4YokNEFJeeEYSSAg5KY6EgAnAnX13Pj-aHFCy9ZSPZqlIMIb1EggBUpsR-zz1BhvnGIlPLWWXMiKX8LCEyWPqabtbco8I3LnBCK_XmGZ4-0u7KlVDtya6PWuKg0Thu4rrC1232fcs8uVVSU3EgofaniSGdH1UM2G4VVoupUy2C_GumEvC8_qLUDNBQJAjsyttWGhXktUW71DIQXLsvkcqLG-01Unlol5TdArH-5zGhNkC_PuIQCmgOzKUcjdqTre1ct9d_PuzuT6kxN3OylY7ehNC_gDR3IvmiYTZUAqKZl6x4yZTY9IWSUPQks6HOnKFs_-GdJ1kKZ0XfIZHGjepnqgXnaOdFXYtWvuugP1iLvigH1yfPdpbzuOu1ttRZRbWFVGHmaH9ISxwaQV8YE8NaoDIFMjD4DVkWQAWEUT67mCR2_-yXLGKaZiazRveutqh6vna8lVo8T3NvaEsqCz9vymAb2tU42lpIsECo1UTmOQPWW7mUllSuG8DJQ8mSfVn3bNKzBG5_U-SOzxMIpvHWKnKcpAogzTlBTVDHbeddz0RQA1zSkiDI_bXnY9Wwyd-C2q-X0-TSlnJW4hExAfWZBXk3VqaYV5FtDClKdrJedH2kTEwLJxw1rTOZXNg5MGR-oapNYTvKFKqwXw5qJ92xe5HwYNG2iPkdPitXG4TMJa3D3PysTvSQlebuNoJ5uc8hdUthPRAUf3jpntd-YQ7Yy3NumCdkRaUxUJ6pp5IyetiTVdp5CqxXmhGHgQnFjBN1JmbqWWmTFcHRAKiQPA3HqM6FCxURwYdupfctoS5LwERANkP_c2bx_LV_Q-a46wjcEgjNJ6lxFVatPjFOoT4zY1Rh4TP5D3xgHMPTc-jZuKVttVqeAoqBUvjG5eKov5Ec-tZHOO5kIe2Wtp7BjVW0lS8d7vzjxQUtYuzV2xJlDDjg_3puanG5k5vTBE7jPSKEerZLJ6zUfHhY7FjbHeUqA1ythvVUdxkTQe_UgJsghoB9eXUbDJ3k_xYNzycEWUMHIJzUVRTrPRfX30wut5A58raU-xm6nnzHN0lRk1XKVwYNOOuqToetYVkZMpfF1vAfdK5aZkwt6VpFajgrqUqf46HKcjNl1XbxTvDhq323FOUJ4VczSTlSwBtNrw4kNkD0N1MefiWwftM17R9CAV63FjjWuWmyxrSjantI7DgH8WBwCEOnx6jcHHGUePrb9N26eOY8Hh6fK82_iYSRJ3NW2bJDIGIbwWqNFHo1uJg4RUu71INysR-O3LthNteDLCi8JB62Mgp0G8HzfywwpHBNX9BJwOb_hkVFKqb8FtQ4Wh8sRpaXuwkFxe01ftfCLXNJ9fx9HpUgOJDs_Yp1zV8pv0bF9bXcN6tyv7-UayKzfLj4klu7cwNoKcbW0jmbJrtl89kc3et_T1pLliuuahtS62yD2n8ZiOfZtYLm74s_jONDvM2H2KYx2Y4tmNpUvE3DQv5OdraPQUTbs0xNIliPipsZ-IiD53o2AjN9ErEE_quk6c9T636JpbmSbB0-B4Uhy_H3M_gOH1Gr72wEsy3YNUPWmZ1gzQKLCs2WlB6Bt3pdSbpsuEx4QkFWNI93DMoWfK-vF-UXelKseOJ7fyEawevoKrKTCtFOwAKyEtubmmgysLNbTbafhY0esbchukx1ppNCfniYFhgCB9eWgugo0s3w3qdDiowDlNuZMTIFedewR3083G-9yx7VwjHQDObHAEBaRM7CaHjQQuoe684DoM0OsQz11slN-H7qAVvswaSPLr6kr0w9bNcwnbEpMEEhwKC4_mdAwSl8vf5cZqfPYFkiiSk7m1Oucr040O-KyX35Z_SZZZJv7xJcM-l32e3WZ992MeXppH1vWfy8_6z5kZD33jTXWy_NE_huzbcmjTuM_-0lHLH5e46mb0Syg1j90v5flTgH5btnG9_PHH8rX8QbP8B02JW3p-5wqkaPbbclr-YJgPgRE4kRdEht_M3z-_Ld9NM3ulPjieFTaCwDP0_PAs-9Nd9NP4Fcef_wEwj4Vl?type=png)](https://mermaid.live/edit#pako:eNplVtuuqzgS_ZUoo5ZmlJN9IOF63mxj7gnXkEDveSBADIEACRBCWv3vwz6n1ZrRwANm1XK5VHaV1x_LpEmz5Y_lpWrGJI8f_QL6n_VnzwgMs2V__1wuPpf_XqzX68V2u9lsuRlRpzZ7PIuueSzMeMoeM-FrhkjNM7h_zgT74mV1l834v74M3XAmj7jNF__j88vy2QsiS202v8-YEVfFwizq4fX5WdPi5oPmhA-W-9h83zAzfeYv_nqYL_qxqNNm7BY09V90-mP7N_vL-6-QfkbP_B_ya-kZng1ZnX4Nfvttscset7hIF_Kcj4VUxHPkt6-wyp9WI8vaRZ8X3aKaoUXfLG5xmS0uQz88skWWFn33BU7N8Fikvyb_nJf3fdv9-P59HMeP268VvhL-Ebft978z_489o5GI7IlI-AImDdwcwA364E3I5q6A6k4QA44IPIA2ogTskZERx4prrIFOBj6gnHyGVZ1i4A0VIASqoRMTo4MOKgBsCNQQSHITQhtKEyWAJ6EdKIXV-UC0gOBzoxHOg07UCSrW1mgPHc6WxmwvtQVDYKcBxHVVCPwh114AGkFJAE0IJ-EqGi7wAA_HECBD3hl3TS6k5o5e4WBIGF7NhhBJAQYXvmQA-pyVprRuPEcy-rJMBASdOm52IVX6noMKzyiQx5UZVG5-0NOGQaS7q_jKygMSzGFa2BfsBcAPJr_UL8fwYFJlT9cFnLPg5Oy6kYgDdNNodA4ZJDue99l5BYtGlLCFeRebkSqcQtN97AGibNgwOTPmFD7h4YokNEFJeeEYSSAg5KY6EgAnAnX13Pj-aHFCy9ZSPZqlIMIb1EggBUpsR-zz1BhvnGIlPLWWXMiKX8LCEyWPqabtbco8I3LnBCK_XmGZ4-0u7KlVDtya6PWuKg0Thu4rrC1232fcs8uVVSU3EgofaniSGdH1UM2G4VVoupUy2C_GumEvC8_qLUDNBQJAjsyttWGhXktUW71DIQXLsvkcqLG-01Unlol5TdArH-5zGhNkC_PuIQCmgOzKUcjdqTre1ct9d_PuzuT6kxN3OylY7ehNC_gDR3IvmiYTZUAqKZl6x4yZTY9IWSUPQks6HOnKFs_-GdJ1kKZ0XfIZHGjepnqgXnaOdFXYtWvuugP1iLvigH1yfPdpbzuOu1ttRZRbWFVGHmaH9ISxwaQV8YE8NaoDIFMjD4DVkWQAWEUT67mCR2_-yXLGKaZiazRveutqh6vna8lVo8T3NvaEsqCz9vymAb2tU42lpIsECo1UTmOQPWW7mUllSuG8DJQ8mSfVn3bNKzBG5_U-SOzxMIpvHWKnKcpAogzTlBTVDHbeddz0RQA1zSkiDI_bXnY9Wwyd-C2q-X0-TSlnJW4hExAfWZBXk3VqaYV5FtDClKdrJedH2kTEwLJxw1rTOZXNg5MGR-oapNYTvKFKqwXw5qJ92xe5HwYNG2iPkdPitXG4TMJa3D3PysTvSQlebuNoJ5uc8hdUthPRAUf3jpntd-YQ7Yy3NumCdkRaUxUJ6pp5IyetiTVdp5CqxXmhGHgQnFjBN1JmbqWWmTFcHRAKiQPA3HqM6FCxURwYdupfctoS5LwERANkP_c2bx_LV_Q-a46wjcEgjNJ6lxFVatPjFOoT4zY1Rh4TP5D3xgHMPTc-jZuKVttVqeAoqBUvjG5eKov5Ec-tZHOO5kIe2Wtp7BjVW0lS8d7vzjxQUtYuzV2xJlDDjg_3puanG5k5vTBE7jPSKEerZLJ6zUfHhY7FjbHeUqA1ythvVUdxkTQe_UgJsghoB9eXUbDJ3k_xYNzycEWUMHIJzUVRTrPRfX30wut5A58raU-xm6nnzHN0lRk1XKVwYNOOuqToetYVkZMpfF1vAfdK5aZkwt6VpFajgrqUqf46HKcjNl1XbxTvDhq323FOUJ4VczSTlSwBtNrw4kNkD0N1MefiWwftM17R9CAV63FjjWuWmyxrSjantI7DgH8WBwCEOnx6jcHHGUePrb9N26eOY8Hh6fK82_iYSRJ3NW2bJDIGIbwWqNFHo1uJg4RUu71INysR-O3LthNteDLCi8JB62Mgp0G8HzfywwpHBNX9BJwOb_hkVFKqb8FtQ4Wh8sRpaXuwkFxe01ftfCLXNJ9fx9HpUgOJDs_Yp1zV8pv0bF9bXcN6tyv7-UayKzfLj4klu7cwNoKcbW0jmbJrtl89kc3et_T1pLliuuahtS62yD2n8ZiOfZtYLm74s_jONDvM2H2KYx2Y4tmNpUvE3DQv5OdraPQUTbs0xNIliPipsZ-IiD53o2AjN9ErEE_quk6c9T636JpbmSbB0-B4Uhy_H3M_gOH1Gr72wEsy3YNUPWmZ1gzQKLCs2WlB6Bt3pdSbpsuEx4QkFWNI93DMoWfK-vF-UXelKseOJ7fyEawevoKrKTCtFOwAKyEtubmmgysLNbTbafhY0esbchukx1ppNCfniYFhgCB9eWgugo0s3w3qdDiowDlNuZMTIFedewR3083G-9yx7VwjHQDObHAEBaRM7CaHjQQuoe684DoM0OsQz11slN-H7qAVvswaSPLr6kr0w9bNcwnbEpMEEhwKC4_mdAwSl8vf5cZqfPYFkiiSk7m1Oucr040O-KyX35Z_SZZZJv7xJcM-l32e3WZ992MeXppH1vWfy8_6z5kZD33jTXWy_NE_huzbcmjTuM_-0lHLH5e46mb0Syg1j90v5flTgH5btnG9_PHH8rX8QbP8B02JW3p-5wqkaPbbclr-YJgPgRE4kRdEht_M3z-_Ld9NM3ulPjieFTaCwDP0_PAs-9Nd9NP4Fcef_wEwj4Vl)

In this setup we've added a virtual PfSense firewall to segment and control the traffic between the two virtual machines. As you'll come to learn the PfSense firewall is near and dear to my heart, being an open-source firewall with tons of plugins and support(I'll have another blog post dedicated to some PfSense features in the future).

Notice that the two virtual machines have different subnet addresses. 
The Windows 10 VM is on the 192.168.**1** subnet, and the Kali machine is on the 192.168.**56** subnet. These two virtual machines will be unable to communicate with one another directly. The traffic must pass through the PfSense firewall that they are connected to. The reason for adding the firewall is that it allows an array of configuration options and will help us learn how to deploy and leverage firewalls for network segementation. Additionally, we can leverage firewall logs to begin our forays into log analysis.

## Homelab + Firewall + SIEM
___
[![](https://mermaid.ink/img/pako:eNptVtuyqkgS_RXDiY6YCY-7Qbl53qqK4q5cRWH2PCBggSCggIgd_e-Du0_0nJme4oGqlZmLiqysZP02j-sknX-fn8t6iLPo3s2g91l9do_83vVR-c_P-exz_q_ZcrmcZY9ppYxNen_kbX2fGdGY3ifj2705_30yWmc3rdp0wv7xBtv-RO5Rk83-m-yzmv0YSX5P4y6vq5kH3wGfXRGV-T8nP316z4y86p-fnxW9WX3QnPDBch-rX1fMRPETx0BT74BDXiX10M5o6qcA-mP9F_-2KfuqeIe4X7PJ_XP-0xe-In6mYCfgZ4L3FmfLj-UPpv9l_jJNm_oP3pzf6Vt-Bf4V_T-ufzL_YUir5D19P7_8Mtum92uUJzNpOrCZmEdThq_vTBVfVj1Nm1mX5e2snKBZV8-uUZHOzn3X39NZmuRd-wbHur9P2f8K_orLuq5pv__66zAMH9c_vvCuiI-oaX79szT-tmNUEpId2RA-h3ENV3twhR54EbK6yaC8EcSAAwJ3oA4oBjukp8Q2owqroJWAByg7m2BFoxh4RTkIgKJrxMBor4ESAAsCJQCiVAfQguJICeBBaBuKQXnaE9Un-FSrhHOhHbaCgtUl2kGbs8Qh3YlNzhDYqgBxbRkAr8_UJ4C6XxBAE8KJuAz7M9zD_SEASJe2-k2VcrG-oWfQ6yKGF6MmRJSBzgVPCYAuY8UxqWrXFvWuKGIBQbuK6m1AFZ5ro9zVc-RyRQrlq-d3tK4T8ebInrxwgQgzmOTWGbs-8PzRK7TzIdgbVNHRVQ6nLNgZu6xFYgPN0GuNQzpJD6ddelrAvN6I2MS8g41QEY6B4dx3AFEWrJmMGTIKH3F_QSIaoSg_cYRE4BNyVWwRgCOBmnKqPW8wOaFhK7EajELYwCtUiS_6cmSF7ONY6y-cYDk4NqaUS7JXwNzdiC5TjuvrmLp66EwJRF61wBLHW23QUYsMOBXRqm1Z6AYMnGdQmeyuS7lHm8mLUqpFFNyV4CgxG8dFFRsEF6FuF3JvPRnzit00OClXH9VnCAA5MNfGgrlyKVBldjaFZCxJxqOnhupGl-2miI1LjJ5Zf5vSGCNLmE4PATD6ZFsMQuaM5eGmnG_bq3uzR8cb7ajdiv5iS68awO85krnhOBooBWJBSdQrYox0vIfyIr4TWtTgQJfW5uSdIF35SUJXBZ_CnuYtqgPKeWuLF5ldOsa23VP3qM332COHV5d0lm0728V6gzITK_LAw3SfHDHWmaQkHpDGWrEBZCrkArA4kBQAM68jLZPx4E6LNGPsfMzXev2i1466v7ieGl9UavNaR65Q5HTanF40oNdVorKUeBZBrpLSrnWyoywnNahUzu2njuIH86C647Z--vpgP197kT3sh81Lg9iu88IXKd0wRFkx_K17GVZd7kNVtfMQw8O6kxzX2gR29Noo2W2qpoQzYyeXCIgOLMjK0Tw2tMw8cmhiytXUgvNCdSQb37RwzZrjKZGMvZ34B-riJ-YDvKBCKzlwp0v7ss5S1_cq1tEOI7vBS31_HoXlZvs4ySO_IwV4OrWtHi1yzJ5QXo9EAxzd2Ua62xp9uNVf6qgJ6gGpdZnHqK2ngxzVOlI1jUKKGmW5rONesCMZX0mROqVSpHp_sUEgxDYAU-vRw33JhpGvW4l3zmhTkLICEBWQ3dTb3F0kXdDrpNrCOgK9MIjLbUoUsUkOY6CNjFNXGLlMdEfuC_swc53oOKxKWmkWhYxDv5LdILy6ibTJDnhqJatTOF3kgb0U-pZR3IUo5q_d9sQDOWGtwtjmSwJVbHtwZ6hespKY4xND5DxClbLVUiKL51Q6DrRNboi0hgKNXkReo9iyg8Th4IWyn4ZA3TuehPxV-nps9vo1CxZEDkKH0FwYZjQb3pYHN7icVvCxEHcUuxo7zjiFF4lRgkUCezZpqXOCLidN3nAShS_LNeCeiVQXTNA5otiolF8VEtVd-sN4wIbjaLXs3kDttFvO9ouTbAxGvJBEgBYrfnPfsPu-PBvT5Vv6zSNa0HQv5sthZQ5LlhtNc4xXx6SKAp9_5HsAhCp4uLXORylHD423TpqHhiPB5unitF15mIljZzGu6zjUeyG45KjWBr1dbHoRKVZzFq9mLPDrp2XFav9ghCeF_cbDQEr8aDespLsZDAgquxHYLV7x8SAnVNeA64oKAvmBk8JyYS46vKotmqkilzSfXYbBbhMdbWyesY6ZomZX8dE815qKtXZbdNMfySqdNDvEpuRcg0j3M7ax9HhML-lu8UAWe1vTl6PqbJIlD81lvkbOKYmGZOia2HRwzZ82r1S1gpTdJTjSgLE5OZF4Dpmr6gb89BsaXFlVzzUxNREifqytByIbj7tSsJbq8Olvjsqyiu3lLjPpilsYBsFjb7tiFL3uUz-AweUSPHfAjVPNhVQ1qqla91DPsaRaSU7oK3ehlKuqSYTHhMQlo4u3YMiga0ja4XZWtoUiRbYrNdIBLO6ejMvRN8wEbAErIjW-OoaNSxPVtNOq-FDSyytyaqRFaqHXR_uBga4DP3m6aLoEK0m66dRxv1eAfRwzOyNAKlvnAG6Gkw63qWNbmUpaAOzJYAsySJjIifcrEZwDzX7CZeCj5z6autggvfbtXs09idWR6FXlhWj7tZNlIrZEJvZF2OcmHozx4McOl72KlVl77BPEYSjFU2u1TxemHWzwWc2_zX9IlknH_vbWTJ_zLkuvkw79Pk3P9T1tu8_5Z_X75Bn1Xe2OVTz_3t379Nu8b5KoS3_oqPn3c1S2E_oWSvV9-4c0_lLI3-ZNVM2__zZ_zr_TzPqDpja0wHO8wKxYlv82Hyd4kosCI_AURdFrjmU44fdv81ddT7TUB8ezwkoQeIaeBs-yX3zhl_G9kd__DXTGtJI?type=png)](https://mermaid.live/edit#pako:eNptVtuyqkgS_RXDiY6YCY-7Qbl53qqK4q5cRWH2PCBggSCggIgd_e-Du0_0nJme4oGqlZmLiqysZP02j-sknX-fn8t6iLPo3s2g91l9do_83vVR-c_P-exz_q_ZcrmcZY9ppYxNen_kbX2fGdGY3ifj2705_30yWmc3rdp0wv7xBtv-RO5Rk83-m-yzmv0YSX5P4y6vq5kH3wGfXRGV-T8nP316z4y86p-fnxW9WX3QnPDBch-rX1fMRPETx0BT74BDXiX10M5o6qcA-mP9F_-2KfuqeIe4X7PJ_XP-0xe-In6mYCfgZ4L3FmfLj-UPpv9l_jJNm_oP3pzf6Vt-Bf4V_T-ufzL_YUir5D19P7_8Mtum92uUJzNpOrCZmEdThq_vTBVfVj1Nm1mX5e2snKBZV8-uUZHOzn3X39NZmuRd-wbHur9P2f8K_orLuq5pv__66zAMH9c_vvCuiI-oaX79szT-tmNUEpId2RA-h3ENV3twhR54EbK6yaC8EcSAAwJ3oA4oBjukp8Q2owqroJWAByg7m2BFoxh4RTkIgKJrxMBor4ESAAsCJQCiVAfQguJICeBBaBuKQXnaE9Un-FSrhHOhHbaCgtUl2kGbs8Qh3YlNzhDYqgBxbRkAr8_UJ4C6XxBAE8KJuAz7M9zD_SEASJe2-k2VcrG-oWfQ6yKGF6MmRJSBzgVPCYAuY8UxqWrXFvWuKGIBQbuK6m1AFZ5ro9zVc-RyRQrlq-d3tK4T8ebInrxwgQgzmOTWGbs-8PzRK7TzIdgbVNHRVQ6nLNgZu6xFYgPN0GuNQzpJD6ddelrAvN6I2MS8g41QEY6B4dx3AFEWrJmMGTIKH3F_QSIaoSg_cYRE4BNyVWwRgCOBmnKqPW8wOaFhK7EajELYwCtUiS_6cmSF7ONY6y-cYDk4NqaUS7JXwNzdiC5TjuvrmLp66EwJRF61wBLHW23QUYsMOBXRqm1Z6AYMnGdQmeyuS7lHm8mLUqpFFNyV4CgxG8dFFRsEF6FuF3JvPRnzit00OClXH9VnCAA5MNfGgrlyKVBldjaFZCxJxqOnhupGl-2miI1LjJ5Zf5vSGCNLmE4PATD6ZFsMQuaM5eGmnG_bq3uzR8cb7ajdiv5iS68awO85krnhOBooBWJBSdQrYox0vIfyIr4TWtTgQJfW5uSdIF35SUJXBZ_CnuYtqgPKeWuLF5ldOsa23VP3qM332COHV5d0lm0728V6gzITK_LAw3SfHDHWmaQkHpDGWrEBZCrkArA4kBQAM68jLZPx4E6LNGPsfMzXev2i1466v7ieGl9UavNaR65Q5HTanF40oNdVorKUeBZBrpLSrnWyoywnNahUzu2njuIH86C647Z--vpgP197kT3sh81Lg9iu88IXKd0wRFkx_K17GVZd7kNVtfMQw8O6kxzX2gR29Noo2W2qpoQzYyeXCIgOLMjK0Tw2tMw8cmhiytXUgvNCdSQb37RwzZrjKZGMvZ34B-riJ-YDvKBCKzlwp0v7ss5S1_cq1tEOI7vBS31_HoXlZvs4ySO_IwV4OrWtHi1yzJ5QXo9EAxzd2Ua62xp9uNVf6qgJ6gGpdZnHqK2ngxzVOlI1jUKKGmW5rONesCMZX0mROqVSpHp_sUEgxDYAU-vRw33JhpGvW4l3zmhTkLICEBWQ3dTb3F0kXdDrpNrCOgK9MIjLbUoUsUkOY6CNjFNXGLlMdEfuC_swc53oOKxKWmkWhYxDv5LdILy6ibTJDnhqJatTOF3kgb0U-pZR3IUo5q_d9sQDOWGtwtjmSwJVbHtwZ6hespKY4xND5DxClbLVUiKL51Q6DrRNboi0hgKNXkReo9iyg8Th4IWyn4ZA3TuehPxV-nps9vo1CxZEDkKH0FwYZjQb3pYHN7icVvCxEHcUuxo7zjiFF4lRgkUCezZpqXOCLidN3nAShS_LNeCeiVQXTNA5otiolF8VEtVd-sN4wIbjaLXs3kDttFvO9ouTbAxGvJBEgBYrfnPfsPu-PBvT5Vv6zSNa0HQv5sthZQ5LlhtNc4xXx6SKAp9_5HsAhCp4uLXORylHD423TpqHhiPB5unitF15mIljZzGu6zjUeyG45KjWBr1dbHoRKVZzFq9mLPDrp2XFav9ghCeF_cbDQEr8aDespLsZDAgquxHYLV7x8SAnVNeA64oKAvmBk8JyYS46vKotmqkilzSfXYbBbhMdbWyesY6ZomZX8dE815qKtXZbdNMfySqdNDvEpuRcg0j3M7ax9HhML-lu8UAWe1vTl6PqbJIlD81lvkbOKYmGZOia2HRwzZ82r1S1gpTdJTjSgLE5OZF4Dpmr6gb89BsaXFlVzzUxNREifqytByIbj7tSsJbq8Olvjsqyiu3lLjPpilsYBsFjb7tiFL3uUz-AweUSPHfAjVPNhVQ1qqla91DPsaRaSU7oK3ehlKuqSYTHhMQlo4u3YMiga0ja4XZWtoUiRbYrNdIBLO6ejMvRN8wEbAErIjW-OoaNSxPVtNOq-FDSyytyaqRFaqHXR_uBga4DP3m6aLoEK0m66dRxv1eAfRwzOyNAKlvnAG6Gkw63qWNbmUpaAOzJYAsySJjIifcrEZwDzX7CZeCj5z6autggvfbtXs09idWR6FXlhWj7tZNlIrZEJvZF2OcmHozx4McOl72KlVl77BPEYSjFU2u1TxemHWzwWc2_zX9IlknH_vbWTJ_zLkuvkw79Pk3P9T1tu8_5Z_X75Bn1Xe2OVTz_3t379Nu8b5KoS3_oqPn3c1S2E_oWSvV9-4c0_lLI3-ZNVM2__zZ_zr_TzPqDpja0wHO8wKxYlv82Hyd4kosCI_AURdFrjmU44fdv81ddT7TUB8ezwkoQeIaeBs-yX3zhl_G9kd__DXTGtJI)

In this configuration we've added Splunk to our homelab to aid in log collection and analysis. The network configuration here allows Splunk to talk to both the Kali and Windows virtual machines in order to collect logs. Note, the Splunk and Kali VM's are still on different subnets, and must be allowed to communicate through PfSense in order to communicate with each other. Here, Splunk is configured with two NICs in order to communicate with both of the virtual machines(on separate LANs) for the purposes of log collection. 

An alternative is to place Splunk on its own LAN/VLAN or subnet and add some firewall rules to restrict Splunk comunication to be on log collection ports. This is a best practice and would be more indicative of an enterprise network configuration and may help you practice configuring firewall rules as well. 

[![](https://mermaid.ink/img/pako:eNplVluzqjgW_iuWU101Ux53g3LzvCUh3JWrKPSeBwQMyFUBEbv6vw_7nJ6pnuq8JPnWJclK1sr3-zJuknT5fXktmzHOoke_gN5n_dk_80c_ROVvn8vF5_Lfi_V6vcie80yZ2vTxzLvmsTCiKX3Mwi_19vrPWWhd3bTu0hn71xfYDRfyiNps8f_OvkSffRGV-W8zos_9wsjr4fX5WdO7zQfNCR8s97H5dcPMyrP24s820tSXwSmvk2bsFjT1FwP6Y_s3_a4th7r4MnF_jGb1z-V_Dfi5my3-qt9efxzza2N_A-e1_4b99D87rX-K0jr5Ofmsf_llsU8fVZQnC2kO7ELMozkS1dc5ix9SPU3bRZ_l3aKcoUXfLKqoSBfXoR8e6SJN8r77AqdmeCySn8Y_7LK-b7vvv_46juNH9XOFr5v7iNr21_9d4T8OjEpCciA7wucwbuDmCCrogTchm7sMyjtBDDgh8ADqiGJwQHpKbDOqsQo6CXiAsrMZVjSKgRXKQQAUXSMGRkcNlABYECgBEKUmgBYUJ0oAT0LbUAzKy5GoPsGXRiWcC-2wExSsrtEB2pwljulBbHOGwE4FiOvKAHhDpr4A1P2CAJoQTsRlOFzhER5PAUC6tNfvqpSLzR29gkEXMbwZDSGiDHQueEkA9BkrTknduLao90URCwjaddTsA6rwXBvlrp4jlytSKFee39O6TsS7I3vyygUizGCSW1fs-sDzJ6_QrqfgaFBFT9c5nKNgZ-y6EYkNNENvNA7pJD1dDullBfNmJ2IT8w42QkU4B4bzOABEWbBhMmbMKHzGww2JaIKi_MIREoFPSKXYIgBnAjXl0njeaHJCy9ZiPRqFsIMVVIkv-nJkhezz3OhvnGA5OLemlEuyV8Dc3YkuU07bakpdPXTmACKvXmGJ460u6KlVBpyaaPW-LHQDBs4rqE320Kfcs8vkVSk1IgoeSnCWmJ3jopoNgpvQdCt5sF6MWWE3DS5K5aPmCgEgJ6ZqLZgrtwLVZm9TSMaSZDwHaqzvdNntiti4xeiVDfc5jDGyhPn2EACTT_bFKGTOVJ7uyvW-r9y7PTneZEfdXvRXe3rTAv7IkcwNp8lAKRALSqLeEWOk0yOUV_GD0KIGR7q0dhfvAunaTxK6LvgUDjRvUT1QrntbvMns2jH23ZF6RF1-xB45vfukt2zb2a-2O5SZWJFHHqbH5IyxziQl8YA0NYoNIFMjF4DViaQAmHkTaZmMR3eepBlj51O-1Zs3vXXU48311PimUrv3NnKFIqfT9vKmAb2tE5WlxKsIcpWUdqOTA2U5qUGlcm6_dBQ_mSfVn_fNy9dH-_U-iuzpOO7eGsR2kxe-SOmGIcqK4e_d27jpcx-qqp2HGJ62veS41i6wo_dOye7za0o4M3ZyiYDoxIKsnMxzS8vMM4cmplxNLTgvVCey800LN6w5XRLJONqJf6JufmI-wRsqtJIDd07at3WV-mFQsY4OGNktXuvH6ySsd_vnRZ74AynAy2ls9WyRc_aC8nYiGuDo3jbSw94Ywr3-VidNUE9Ibco8Rl0zX-SkNpGqaRRS1CjLZR0Pgh3JuCJF6pRKkerDzQaBENsAzKVHD48lG0a-biXeNaNNQcoKQFRADnNtcw-RdEPvi2oL2wgMwiiu9ylRxDY5TYE2MU5TY-Qy0QO5b-zDzHWi87gpaaVdFTIO_Vp2g7ByE2mXnfBcSjaXcE7kkb0V-p5R3JUo5u_D_sIDOWGtwtjnawJVbHvwYKhespGY8wtD5DxDlbLVUiKr1_x0HGib3BhpLQVavYi8VrFlB4njyQtlPw2BenQ8Cfmb9P3cHfUqC1ZEDkKH0FwYZjQb3tcnN7hdNvC5Eg8Uu5l6zriEN4lRglUCBzbpqGuCbhdN3nEShW_rLeBeidQUTNA7otiqlF8XEtXfhtN0wobjaI3s3kHjdHvO9ouLbIxGvJJEgFYbfvfYscehvBpz8q399hmtaHoQ8_W4Mcc1y02mOcWbc1JHgc8_8yMAQh083Ubno5Sjx9bbJu1Tw5Fg83Rx2W88zMSxs5q2TRzqgxDcctRoo96tdoOIFKu9ipUZC_z2ZVmxOjwZ4UVhv_UwkBI_Oowb6WEGI4LKYQJ2hzd8PMoJ1beg2lBBID9xUlguzEWHV7VVO7_INc1nt3G0u0RHO5tnrHOmqFklPtvXVlOx1u2Lfv6RrNJJs1NsSk4VRLqfsa2lx1N6Sw-rJ7LY-5a-nVVnl6x5aK7zLXIuSTQmY9_GpoMb_rJ7p6oVpOwhwZEGjN3FicRryFSqG_DzNzS6sqpeG2JqIkT81FhPRHYeV1GwkZrw5e_OyrqO7fUhM-maWxkGwdNgu2IUvR9zPYDB7Ra8DsCNU82FVD2pqdoMUM-xpFpJTuiKu1FKpWoS4TEhccno4j0YM-gakna6X5V9oUiR7UqtdAKrhyfjcvINMwF7wIpIjSvHsHFpooZ2OhWfSnpdIadBWqQWenO2nxjoOvCTl4vmJNhI0l2nzsejAuzzlNkZAVLZOSdwN5x0vM8V28pU0gFgzwJbkEHCRE583IjgGmj2C64DH72O0VzFRul97I5q7kmsjkSvLm9EO26dLBOxJTKxL8IhN_FoTCc_drjsXWzMxmNfIA5DKZ5Lq325Md1og896-W35J2WZ-ebvX5zpc9lnaTXzxe_z8No80q7_XH7Wf8ya0dA37lTHy-_9Y0i_LYc2ifr0Tx61_H6Nym5Gv4hS89j_pLA_mOy3ZRvVy--_L1_L7zSz_aCpHS3wHC8wG5blvy2nGZ7pn8AIPEVR9JZjGU7449vy3TSzW-qD41lhIwg8Q8-NZ9kf_sIfwq-N_PEfx5-eAA?type=png)](https://mermaid.live/edit#pako:eNplVluzqjgW_iuWU101Ux53g3LzvCUh3JWrKPSeBwQMyFUBEbv6vw_7nJ6pnuq8JPnWJclK1sr3-zJuknT5fXktmzHOoke_gN5n_dk_80c_ROVvn8vF5_Lfi_V6vcie80yZ2vTxzLvmsTCiKX3Mwi_19vrPWWhd3bTu0hn71xfYDRfyiNps8f_OvkSffRGV-W8zos_9wsjr4fX5WdO7zQfNCR8s97H5dcPMyrP24s820tSXwSmvk2bsFjT1FwP6Y_s3_a4th7r4MnF_jGb1z-V_Dfi5my3-qt9efxzza2N_A-e1_4b99D87rX-K0jr5Ofmsf_llsU8fVZQnC2kO7ELMozkS1dc5ix9SPU3bRZ_l3aKcoUXfLKqoSBfXoR8e6SJN8r77AqdmeCySn8Y_7LK-b7vvv_46juNH9XOFr5v7iNr21_9d4T8OjEpCciA7wucwbuDmCCrogTchm7sMyjtBDDgh8ADqiGJwQHpKbDOqsQo6CXiAsrMZVjSKgRXKQQAUXSMGRkcNlABYECgBEKUmgBYUJ0oAT0LbUAzKy5GoPsGXRiWcC-2wExSsrtEB2pwljulBbHOGwE4FiOvKAHhDpr4A1P2CAJoQTsRlOFzhER5PAUC6tNfvqpSLzR29gkEXMbwZDSGiDHQueEkA9BkrTknduLao90URCwjaddTsA6rwXBvlrp4jlytSKFee39O6TsS7I3vyygUizGCSW1fs-sDzJ6_QrqfgaFBFT9c5nKNgZ-y6EYkNNENvNA7pJD1dDullBfNmJ2IT8w42QkU4B4bzOABEWbBhMmbMKHzGww2JaIKi_MIREoFPSKXYIgBnAjXl0njeaHJCy9ZiPRqFsIMVVIkv-nJkhezz3OhvnGA5OLemlEuyV8Dc3YkuU07bakpdPXTmACKvXmGJ460u6KlVBpyaaPW-LHQDBs4rqE320Kfcs8vkVSk1IgoeSnCWmJ3jopoNgpvQdCt5sF6MWWE3DS5K5aPmCgEgJ6ZqLZgrtwLVZm9TSMaSZDwHaqzvdNntiti4xeiVDfc5jDGyhPn2EACTT_bFKGTOVJ7uyvW-r9y7PTneZEfdXvRXe3rTAv7IkcwNp8lAKRALSqLeEWOk0yOUV_GD0KIGR7q0dhfvAunaTxK6LvgUDjRvUT1QrntbvMns2jH23ZF6RF1-xB45vfukt2zb2a-2O5SZWJFHHqbH5IyxziQl8YA0NYoNIFMjF4DViaQAmHkTaZmMR3eepBlj51O-1Zs3vXXU48311PimUrv3NnKFIqfT9vKmAb2tE5WlxKsIcpWUdqOTA2U5qUGlcm6_dBQ_mSfVn_fNy9dH-_U-iuzpOO7eGsR2kxe-SOmGIcqK4e_d27jpcx-qqp2HGJ62veS41i6wo_dOye7za0o4M3ZyiYDoxIKsnMxzS8vMM4cmplxNLTgvVCey800LN6w5XRLJONqJf6JufmI-wRsqtJIDd07at3WV-mFQsY4OGNktXuvH6ySsd_vnRZ74AynAy2ls9WyRc_aC8nYiGuDo3jbSw94Ywr3-VidNUE9Ibco8Rl0zX-SkNpGqaRRS1CjLZR0Pgh3JuCJF6pRKkerDzQaBENsAzKVHD48lG0a-biXeNaNNQcoKQFRADnNtcw-RdEPvi2oL2wgMwiiu9ylRxDY5TYE2MU5TY-Qy0QO5b-zDzHWi87gpaaVdFTIO_Vp2g7ByE2mXnfBcSjaXcE7kkb0V-p5R3JUo5u_D_sIDOWGtwtjnawJVbHvwYKhespGY8wtD5DxDlbLVUiKr1_x0HGib3BhpLQVavYi8VrFlB4njyQtlPw2BenQ8Cfmb9P3cHfUqC1ZEDkKH0FwYZjQb3tcnN7hdNvC5Eg8Uu5l6zriEN4lRglUCBzbpqGuCbhdN3nEShW_rLeBeidQUTNA7otiqlF8XEtXfhtN0wobjaI3s3kHjdHvO9ouLbIxGvJJEgFYbfvfYscehvBpz8q399hmtaHoQ8_W4Mcc1y02mOcWbc1JHgc8_8yMAQh083Ubno5Sjx9bbJu1Tw5Fg83Rx2W88zMSxs5q2TRzqgxDcctRoo96tdoOIFKu9ipUZC_z2ZVmxOjwZ4UVhv_UwkBI_Oowb6WEGI4LKYQJ2hzd8PMoJ1beg2lBBID9xUlguzEWHV7VVO7_INc1nt3G0u0RHO5tnrHOmqFklPtvXVlOx1u2Lfv6RrNJJs1NsSk4VRLqfsa2lx1N6Sw-rJ7LY-5a-nVVnl6x5aK7zLXIuSTQmY9_GpoMb_rJ7p6oVpOwhwZEGjN3FicRryFSqG_DzNzS6sqpeG2JqIkT81FhPRHYeV1GwkZrw5e_OyrqO7fUhM-maWxkGwdNgu2IUvR9zPYDB7Ra8DsCNU82FVD2pqdoMUM-xpFpJTuiKu1FKpWoS4TEhccno4j0YM-gakna6X5V9oUiR7UqtdAKrhyfjcvINMwF7wIpIjSvHsHFpooZ2OhWfSnpdIadBWqQWenO2nxjoOvCTl4vmJNhI0l2nzsejAuzzlNkZAVLZOSdwN5x0vM8V28pU0gFgzwJbkEHCRE583IjgGmj2C64DH72O0VzFRul97I5q7kmsjkSvLm9EO26dLBOxJTKxL8IhN_FoTCc_drjsXWzMxmNfIA5DKZ5Lq325Md1og896-W35J2WZ-ebvX5zpc9lnaTXzxe_z8No80q7_XH7Wf8ya0dA37lTHy-_9Y0i_LYc2ifr0Tx61_H6Nym5Gv4hS89j_pLA_mOy3ZRvVy--_L1_L7zSz_aCpHS3wHC8wG5blvy2nGZ7pn8AIPEVR9JZjGU7449vy3TSzW-qD41lhIwg8Q8-NZ9kf_sIfwq-N_PEfx5-eAA)

You can replace Splunk with ElasticSearch if you're able to configure it. Splunk is easier to configure, and a bit more user friendly, but the free version does have some limitations such as only being able to ingest 500MB of data per day. ElasticSearch will allow for much more retention but you'll need to configure the entire ELK stack (Elasticsearch, Logstash, Kibana). 

## Scaling
___
In each of these setups you can scale your homelab seemingly endlessly by defining new networks, or adding new virtual machines as resources permit. Be sure to leverage LAN and VLAN segmentation via your virtual firewall to have better control of which systems can talk to one another and over which ports. Leveraging an open source firewall like PfSense with its large amount of plugins will allow you to be able to add features to your homelab like Snort/Suricata IDS, and squid proxy; giving you additional logs for troubleshooting and experimenting in your homelab. I'll cover PfSense plugins in a future blog post.

Depending on the hypervisor you selected my go-to would be to replace any Linux virtual machines with docker or Linux containers. These barebones isolated containers will be more efficient and will allow you to deploy many services and expand your homelab without consuming too many resources.

Now that we have some design ideas, let's go ahead and actually build a lab!

## [Proxmox Homelab &rarr;](/blog/3-proxmox_homelab/) 
## [Virtualbox Homelab &rarr;](/blog/4-virtualbox_homelab/)